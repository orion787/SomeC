## Восьмибитный ассемблер

---
## Разработано на С/С++
---
В данной серии проектов разработан ассемблер для простого восьмибитного калькулятора.  

### Список разработнных утилит :  
* **Кодер (coder)** - принимает мнемоники, а возвращает 16-ричное представление
* **Декодер (disassembler)** - принимает 16-ричное представление, а возвращает мнемоники
* **Эмулятор (emulator)** - принимает 16-ричное представление, а затем эмулирует поведение девайса, принимая входные данные для подстановки    
  
---
  ##  Принцип работы   
  
С помощью восьми бит были закодированы 7 операций над четырьмя регистра.         


В целелой архитектуре, как было сказано выше всего 4 регистра - **A, B, C, D**.  
Регистры **A, B, C** используются по усмотрению программиста, а в регистр **D** осуществляются пермещения *immediate (числовых констант)* с помощью мнемоники ***MOVI***.  
Регистры кодируются двумя битами следующим образом:  
Регистр | Код
-----|-----|
 |A | 00|
 |B | 01|
 |C | 10|
 |D | 11|  
 

Архитектурой поддерживаются самые основные математичские операции: сложение, вычитание, умножение и деление. Для обработки этих операций применяются одноимёнными им опкоды (opcode - operation codes).  
Также предусмотрены операции для взаимодействия с пользователем через экран и клавиатуру калькулятора: операция `IN`- для считывания данных с клавиатуры и `OUT` - для вывода на экран.  
Операции кодируются следующим способом:  
Мнемоника | Операнды | Кодировка|
----------|:--------:|:--------:|
MOVI      |    I(immediate)|  0IIIIIII|
ADD       | Reg, Reg |  1000RRRR|
SUB       | Reg, Reg |  1001RRRR|
MUL       | Reg, Reg |  1010RRRR|
DIV       | Reg, Reg |  1011RRRR|
IN        | Reg      |  110000RR|
OUT       | Reg      |  110001RR|  

Хочу обратитьвнимание, что первый бит любой операции используется для орпеделения того что операция является или не является `MOVI` - это сделано для максимизации числа (отсаются целых 7 бит), которого можно переместить с помощью `MOVI`.

Теперь опишем структуру мнемоник на примерах: 

Арифметические операции:  
`ADD A,B` - данная мнемоника несёт следующий смылс "Возьми значение регистра А и сложи со значение регистра В, а результат запиши в регситр А". Аналогично работают и другие арифметические операци. Теперь разбереём каждый элемент:  
`ADD` - код операции  
`A` - регистр, являющийся местом назначение операции  
`D` - регистр, являющийся источником второго операнда операции  

Механизм работы операций `IN/OUT`:  
`IN B` - "Считай значение с клавиатуры и занеси его в регистр B"  
`OUT D` - "Выведи на экран значение регистра D"

Механизм работы `MOVI`:  
`MOVI 100` - "Положи в регистр D значение константы 100"  


---
## Пример разработки программы  
Допустим, программисту необходимо написать програму, которая будет решать уравнение вида: `f(x, y) = (x+100)*(y*3)`  
Для решения данной задачи необходимо написать следующий код:  

```
IN A
MOVI 100
ADD A, D
IN B
MOVI 3
ADD B, D
MUL A, B
OUT A
```  
Для исполнения программы мнемоники будут переведены в шестнадцатиричную систему согласно таблицам выше. 16-ричный код будет выглядеть следующим образом:  
```
0xc0
0x64
0x83
0xc1
0x03
0x87
0xA1
0xc4
```  
Программист пишет программу используя мнемоники, а затем переводит их в 16-ричную систему счисления с помощью кодера, а после отправляет на исполнением с помощью эмулятора.

---
## Особенности архитектуры и ассемблера, о которых нужно знать  
Стоит понимать, что с помощью 8-битной архитекуры можно хранить только цифры от -127 до 128, т.е. диапазон signed char. Это число обусловенно тем, что маскимальная численная константа, которую можно переместить с помощью операции `MOVI` должна помещаться в 7 бит (первый бит используется для определения операции). Таким образом необходимо деражать в голове, что хранимое число не может выходить за определённый диапазон.   
Также нужно держать в голове, что значения констант всегда переносятся операцией `MOVI` только в регистр `D`.  
Также ассемблер и архитектура не поддерживают числа с плавающей точкой и другие типы данных, не связанные с целыми числами.  

---
 ## Это учебный проект, а не реальная архитектура и ассемблер для неё  
 Стоит понимать, что данный комплекс программ не является какой-либо реально существующей архитектурой и её ассемблером, это лишь проект, созданный в учебных целях.  
Однако, данный ассемблер не сильно проще реально существующих 8-битных архитектур.  
Для эмулятора также созданы версии для операционных систем Windows и Linux это обусловленно различием в возможностях управления стандартного потокоа ввода.  

Хочется выразить отдельную благодарность [Владимирову Константину Игоревичу ](https://www.youtube.com/@tilir) :gift_heart:, за предоставленные курсы!